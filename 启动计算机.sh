#!/data/data/com.termux/files/usr/bin/bash

ç‰ˆæœ¬å·="1.1.0"
è¿œç¨‹ç‰ˆæœ¬åœ°å€="https://raw.githubusercontent.com/Alhkxsj/termux-calculator/main/ç‰ˆæœ¬.txt"
æ›´æ–°è„šæœ¬åœ°å€="https://raw.githubusercontent.com/Alhkxsj/termux-calculator/main/å®‰è£…è„šæœ¬.sh"

# å½©è‰²å®šä¹‰
ç²‰çº¢="\033[1;35m"
ç´«="\033[1;34m"
ç»¿="\033[1;32m"
é»„="\033[1;33m"
é‡ç½®="\033[0m"

clear
echo -e "${ç²‰çº¢}ğŸ’– æ¬¢è¿ä½¿ç”¨å°‘å¥³è®¡ç®—å™¨ ï½ å¯åŠ¨ä¸­ ğŸ’–${é‡ç½®}"
echo

# è‡ªåŠ¨æ£€æµ‹ç‰ˆæœ¬
echo -e "${ç´«}ğŸ” æ­£åœ¨æ£€æŸ¥æ›´æ–°ä¸­...${é‡ç½®}"
æœ€æ–°ç‰ˆæœ¬=$(curl -fsSL "$è¿œç¨‹ç‰ˆæœ¬åœ°å€" | tr -d '\r')

if [ "$æœ€æ–°ç‰ˆæœ¬" != "$ç‰ˆæœ¬å·" ]; then
    echo -e "${é»„}ğŸŒ¸ æ£€æµ‹åˆ°æ–°ç‰ˆæœ¬ï¼šv$æœ€æ–°ç‰ˆæœ¬ï¼ˆå½“å‰ç‰ˆæœ¬ï¼šv$ç‰ˆæœ¬å·ï¼‰${é‡ç½®}"
    echo -ne "${ç»¿}æ˜¯å¦ç«‹å³å‡çº§ï¼Ÿ(y/n)ï¼š${é‡ç½®}"
    read -r æ˜¯å¦å‡çº§
    if [[ "$æ˜¯å¦å‡çº§" == "y" || "$æ˜¯å¦å‡çº§" == "Y" ]]; then
        echo -e "${ç´«}âœ¨ æ­£åœ¨ä¸‹è½½æœ€æ–°ç‰ˆå°‘å¥³è®¡ç®—å™¨...${é‡ç½®}"
        bash <(curl -fsSL "$æ›´æ–°è„šæœ¬åœ°å€")
        exit
    fi
else
    echo -e "${ç»¿}âœ… å·²æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼å°‘å¥³è®¡ç®—å™¨ v$ç‰ˆæœ¬å·${é‡ç½®}"
fi

# èœå•æ˜¾ç¤º
while true; do
    clear
    echo -e "${ç²‰çº¢}â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®${é‡ç½®}"
    echo -e "${ç²‰çº¢}â”‚       ğŸŒ¸ å°‘å¥³è®¡ç®—å™¨å¯åŠ¨èœå• ğŸŒ¸       â”‚${é‡ç½®}"
    echo -e "${ç²‰çº¢}â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯${é‡ç½®}"
    echo
    echo -e "${ç»¿}å½“å‰ç‰ˆæœ¬ï¼šv$ç‰ˆæœ¬å·   ğŸ“… æ›´æ–°æ—¥æœŸï¼šè‡ªåŠ¨æ£€æµ‹${é‡ç½®}"
    echo -e "${é»„}ğŸ‘©â€ğŸ’» ä½œè€…ï¼š@æ³ å¥½å›°æƒ³ç¡è§‰ï¼ˆå¿«æ‰‹ï¼‰${é‡ç½®}"
    echo
    echo -e "${ç´«}è¯·é€‰æ‹©å¯åŠ¨æ–¹å¼ï¼š${é‡ç½®}"
    echo -e "${é»„}1.${é‡ç½®} ğŸ’» å¯åŠ¨ç»ˆç«¯è®¡ç®—å™¨"
    echo -e "${é»„}2.${é‡ç½®} ğŸ–¼ å¯åŠ¨å›¾å½¢è®¡ç®—å™¨ï¼ˆè¯·å…ˆæ‰“å¼€ Termux X11ï¼‰"
    echo -e "${é»„}3.${é‡ç½®} ğŸ”„ æ‰‹åŠ¨æ£€æŸ¥æ›´æ–°"
    echo -e "${é»„}4.${é‡ç½®} âŒ é€€å‡ºå°‘å¥³è®¡ç®—å™¨"
    echo
    echo -ne "${ç²‰çº¢}è¾“å…¥é€‰é¡¹ç¼–å·ï¼ˆ1-4ï¼‰ï¼š${é‡ç½®}"
    read -r é€‰é¡¹

    case $é€‰é¡¹ in
        1)
            clear
            python ~/python/è®¡ç®—æœº.py
            ;;
        2)
            clear
            python ~/python/è®¡ç®—æœºå›¾å½¢ç‰ˆ.py
            ;;
        3)
            echo -e "${ç´«}ğŸŒ¸ æ‰‹åŠ¨æ£€æŸ¥æ›´æ–°ä¸­...${é‡ç½®}"
            æœ€æ–°ç‰ˆæœ¬=$(curl -fsSL "$è¿œç¨‹ç‰ˆæœ¬åœ°å€" | tr -d '\r')
            if [ "$æœ€æ–°ç‰ˆæœ¬" != "$ç‰ˆæœ¬å·" ]; then
                echo -e "${é»„}å‘ç°æ–°ç‰ˆæœ¬ v$æœ€æ–°ç‰ˆæœ¬ï¼Œå½“å‰ç‰ˆæœ¬ v$ç‰ˆæœ¬å·${é‡ç½®}"
                echo -ne "${ç»¿}æ˜¯å¦ç«‹å³å‡çº§ï¼Ÿ(y/n)ï¼š${é‡ç½®}"
                read -r æ˜¯å¦å‡çº§
                if [[ "$æ˜¯å¦å‡çº§" == "y" || "$æ˜¯å¦å‡çº§" == "Y" ]]; then
                    bash <(curl -fsSL "$æ›´æ–°è„šæœ¬åœ°å€")
                    exit
                fi
            else
                echo -e "${ç»¿}ä½ å·²ç»æ˜¯æœ€æ–°ç‰ˆå•¦ï½ v$ç‰ˆæœ¬å·${é‡ç½®}"
                sleep 2
            fi
            ;;
        4)
            echo -e "${ç²‰çº¢}ğŸŒ¸ å†è§å–µï½ æœ‰ç¼˜å†è§å°‘å¥³è®¡ç®—å™¨ ğŸ’•${é‡ç½®}"
            exit
            ;;
        *)
            echo -e "${é»„}æ— æ•ˆçš„è¾“å…¥ï¼Œè¯·é‡æ–°é€‰æ‹©ï½${é‡ç½®}"
            sleep 1.5
            ;;
    esac
done
